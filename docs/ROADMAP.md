# 자영업자 매입/매출 관리 앱 개발 로드맵

바쁜 1인 자영업자가 누워서도 5초 만에 매입/매출을 기록하고, 실제 영업이익을 즉시 확인할 수 있는 모바일 퍼스트 웹 앱

## 개요

**자영업자 장부**는 혼자 가게를 운영하며 수기 장부 작성이 부담스러운 1인 자영업자를 위한 초간편 매입/매출 관리 앱으로 다음 기능을 제공합니다:

- **5초 빠른 입력**: 금액만 입력하면 자동 저장되는 매출/매입 기록
- **실시간 영업이익**: 매출 - 매입 = 영업이익 즉시 계산 및 표시
- **기간별 요약**: 당일/주간/월간 매출/매입/영업이익 집계
- **거래 관리**: 거래 내역 조회, 수정, 삭제 기능

## 기술 스택

- **Framework**: Next.js 15 (App Router + Turbopack)
- **UI**: React 19 + TailwindCSS v4 + shadcn/ui (new-york style)
- **Forms**: React Hook Form + Zod + Server Actions
- **Auth**: Supabase Auth (Google OAuth)
- **Database**: Supabase PostgreSQL (클라우드 우선)
- **Icons**: Lucide React

## 개발 워크플로우

1. **작업 계획**
   - 기존 코드베이스를 학습하고 현재 상태를 파악
   - 새로운 작업을 포함하도록 `ROADMAP.md` 업데이트
   - 우선순위 작업은 마지막 완료된 작업 다음에 삽입

2. **작업 생성**
   - 기존 코드베이스를 학습하고 현재 상태를 파악
   - `/tasks` 디렉토리에 새 작업 파일 생성
   - 명명 형식: `XXX-description.md` (예: `001-setup.md`)
   - 고수준 명세서, 관련 파일, 수락 기준, 구현 단계 포함
   - API/비즈니스 로직 작업 시 "## 테스트 체크리스트" 섹션 필수 포함
   - 예시를 위해 `/tasks` 디렉토리의 마지막 완료된 작업 참조
   - 초기 상태의 샘플로 `000-sample.md` 참조

3. **작업 구현**
   - 작업 파일의 명세서를 따름
   - 기능과 기능성 구현
   - API 연동 및 비즈니스 로직 구현 시 Playwright MCP로 테스트 수행 필수
   - 각 단계 후 작업 파일 내 단계 진행 상황 업데이트
   - 구현 완료 후 E2E 테스트 실행
   - 각 단계 완료 후 중단하고 추가 지시를 기다림

4. **로드맵 업데이트**
   - 로드맵에서 완료된 작업을 완료로 표시

---

## 개발 단계

### Phase 1: 애플리케이션 골격 구축

> 전체 라우트 구조와 빈 페이지들, 공통 레이아웃, 타입 정의를 먼저 완성

- **Task 001: 프로젝트 구조 및 라우팅 설정** ✅ 완료
  - Next.js App Router 기반 전체 라우트 구조 생성
  - 홈(대시보드), 매출입력, 매입입력, 거래수정 페이지 빈 껍데기 생성
  - 모바일 퍼스트 공통 레이아웃 컴포넌트 골격 구현
  - 하단 고정 네비게이션 바 구조 생성

- **Task 001.5: 소셜 로그인 및 인증 시스템 구축 (Supabase)** - 우선순위 (현재 작업)
  - Supabase 프로젝트 생성 및 설정
  - Supabase Auth 클라이언트 라이브러리 설치
  - Google OAuth 프로바이더 설정 (F000)
  - 로그인 화면 UI 구현
  - 세션 관리 및 자동 로그인 구현 (F009)
  - 로그아웃 기능 구현 (F014)
  - 사용자 정보 표시 (F015)
  - 인증 미들웨어 구현 (보호된 라우트)
  - Supabase PostgreSQL 자동 사용자 관리

- **Task 002: 타입 정의 및 데이터베이스 스키마 설계**
  - TypeScript 인터페이스 및 타입 정의 파일 생성 (Transaction, DailySummary, RecurringTransaction)
  - Zod 스키마 정의 (매출/매입 입력, 거래 수정용, 반복 거래 등록용)
  - SQLite 데이터베이스 스키마 설계 문서화 (구현은 Phase 3)
  - API 응답 타입 및 Server Action 타입 정의

### Phase 2: UI/UX 완성 (더미 데이터 활용)

> 모든 화면의 UI를 완성하고 사용자 플로우 검증 (실제 데이터 연동 전)

- **Task 003: 공통 UI 컴포넌트 구현**
  - 금액 입력 컴포넌트 (숫자 키패드 최적화)
  - 날짜 선택기 컴포넌트 (오늘 날짜 기본값)
  - 거래 카드 컴포넌트 (매출/매입 구분 표시)
  - 요약 카드 컴포넌트 (매출/매입/영업이익 표시)
  - 기간 탭 컴포넌트 (오늘/이번주/이번달)
  - 하단 고정 버튼 컴포넌트 (+매출, +매입)

- **Task 004: 홈 화면 (대시보드) UI 구현**
  - 영업이익 대형 표시 영역 (F003)
  - 당일 매출/매입/이익 요약 카드 (F004)
  - 기간 탭 UI (오늘/이번주/이번달) (F005)
  - 거래 내역 리스트 UI (F006)
  - 하단 고정 +매출/+매입 버튼
  - 더미 데이터로 모든 UI 요소 표시

- **Task 005: 매출/매입 입력 화면 UI 구현**
  - 매출 입력 화면 UI (F001, F012)
  - 매입 입력 화면 UI (F002, F012)
  - 금액 입력 필드 (숫자 키패드 자동 포커스)
  - 날짜 선택기 (오늘 날짜 기본값, 수정 가능)
  - 메모 입력 필드 (선택사항, 최대 50자)
  - 저장/취소 버튼
  - 입력 완료 후 홈 화면 리디렉션 플로우

- **Task 006: 거래 수정 화면 UI 구현**
  - 거래 수정 화면 UI (F010, F011, F012)
  - 기존 거래 정보 표시 및 수정 폼
  - 금액/날짜/메모 수정 필드
  - 삭제 버튼 및 확인 다이얼로그
  - 수정/삭제 완료 후 홈 화면 리디렉션

- **Task 007: 모바일 최적화 및 반응형 디자인**
  - 모든 화면 모바일 퍼스트 반응형 적용
  - 터치 친화적 UI 요소 크기 조정
  - 스와이프 제스처 지원 (거래 항목 삭제)
  - 입력 필드 포커스 시 키보드 대응

- **Task 007.5: 반복 거래 UI 구현**
  - 매출/매입 입력 화면에 반복 거래 설정 섹션 추가 (F007)
  - 반복 주기 선택 (주간/월간) 라디오 버튼 또는 셀렉트
  - 시작일/종료일 선택기 (종료일은 선택사항)
  - 설정 화면 및 반복 거래 관리 페이지 UI 구현 (F013)
  - 반복 거래 목록 카드 컴포넌트 (금액, 메모, 주기, 다음 생성일 표시)
  - 활성화/비활성화 토글 스위치

### Phase 3: 핵심 기능 구현

> 실제 데이터베이스 연동 및 비즈니스 로직 구현

- **Task 008: Supabase 데이터베이스 구축** - 우선순위
  - Supabase 테이블 스키마 설계
  - Transaction 테이블 생성 (user_id 외래키 포함)
  - DailySummary 테이블 생성 (성능 최적화용)
  - RecurringTransaction 테이블 생성 (F007, F008, F013)
  - Row Level Security (RLS) 정책 설정
  - 데이터베이스 마이그레이션 파일 작성

- **Task 009: Server Actions 및 API 개발**
  - 매출 입력 Server Action (F001, F007 - 반복 거래 포함)
  - 매입 입력 Server Action (F002, F007 - 반복 거래 포함)
  - 거래 수정 Server Action (F010)
  - 거래 삭제 Server Action (F011)
  - 거래 목록 조회 API
  - 기간별 요약 데이터 조회 API
  - 반복 거래 CRUD Server Actions (생성, 조회, 수정, 삭제, 활성화/비활성화) (F013)
  - Playwright MCP를 활용한 API 통합 테스트

- **Task 010: 실시간 영업이익 계산 로직 구현**
  - 매출 합계 계산 함수
  - 매입 합계 계산 함수
  - 영업이익 계산 로직 (매출 - 매입)
  - DailySummary 자동 업데이트 로직
  - 기간별 집계 로직 (일/주/월)
  - 데이터 변경 시 실시간 UI 업데이트

- **Task 011: 더미 데이터를 실제 API로 교체**
  - 홈 화면 데이터 연동 (영업이익, 요약, 거래내역)
  - 매출/매입 입력 폼 Server Action 연동
  - 거래 수정/삭제 기능 연동
  - 기간 탭 전환 시 데이터 로딩
  - 로딩 상태 및 에러 처리 UI

- **Task 012: 핵심 기능 통합 테스트**
  - Playwright MCP를 사용한 전체 사용자 플로우 테스트
  - 매출 입력 -> 영업이익 업데이트 검증
  - 매입 입력 -> 영업이익 업데이트 검증
  - 거래 수정/삭제 -> 데이터 정합성 검증
  - 기간별 요약 데이터 정확성 검증
  - 에러 핸들링 및 엣지 케이스 테스트

- **Task 012.5: 반복 거래 자동 생성 로직 구현**
  - 반복 거래 스케줄러 구현 (F008)
  - 매일 자정 실행되는 크론 작업 또는 Next.js API Route
  - 주간 반복: 매주 같은 요일에 거래 생성
  - 월간 반복: 매월 같은 날짜에 거래 생성
  - last_generated_at 업데이트 및 중복 생성 방지 로직
  - 비활성 상태 및 종료일 지난 반복 거래 스킵
  - 생성된 거래는 일반 Transaction 테이블에 저장
  - DailySummary 자동 업데이트
  - Playwright MCP를 활용한 자동 생성 로직 테스트

### Phase 4: 고급 기능 및 최적화

> 사용자 경험 향상 및 배포 준비

- **Task 013: 사용자 경험 향상**
  - 입력 완료 시 토스트 알림
  - 삭제 확인 다이얼로그 개선
  - 빈 상태(Empty State) UI
  - 오프라인 상태 표시
  - 입력 속도 최적화 (5초 목표)

- **Task 014: 성능 최적화**
  - 거래 목록 무한 스크롤 또는 페이지네이션
  - DailySummary 캐싱 전략
  - 이미지 및 폰트 최적화
  - 번들 사이즈 최적화

- **Task 015: PWA 설정 및 배포 준비**
  - PWA manifest 설정
  - 서비스 워커 구성
  - 홈 화면 추가 지원
  - Vercel 배포 설정
  - 환경 변수 관리

---

## PRD 기능 매핑

| 기능 ID | 기능명               | 구현 Task          | Phase |
| ------- | -------------------- | ------------------ | ----- |
| F000    | 소셜 로그인          | Task 001.5         | 1     |
| F009    | 자동 로그인          | Task 001.5         | 1     |
| F014    | 로그아웃             | Task 001.5         | 1     |
| F015    | 사용자 정보          | Task 001.5         | 1     |
| F001    | 빠른 매출 입력       | Task 005, 009      | 2, 3  |
| F002    | 빠른 매입 입력       | Task 005, 009      | 2, 3  |
| F003    | 실시간 영업이익 계산 | Task 004, 010      | 2, 3  |
| F004    | 당일 거래 요약       | Task 004, 010      | 2, 3  |
| F005    | 주간/월간 요약       | Task 004, 010      | 2, 3  |
| F006    | 거래 내역 목록       | Task 004, 011      | 2, 3  |
| F007    | 반복 거래 등록       | Task 007.5, 009    | 2, 3  |
| F008    | 반복 거래 자동 생성  | Task 012.5         | 3     |
| F010    | 거래 수정            | Task 006, 009      | 2, 3  |
| F011    | 거래 삭제            | Task 004, 006, 009 | 2, 3  |
| F012    | 메모 추가            | Task 005, 006      | 2     |
| F013    | 반복 거래 관리       | Task 007.5, 009    | 2, 3  |

---

## 라우트 구조

```
src/app/
├── layout.tsx              # 루트 레이아웃 (전역 설정)
├── page.tsx                # 홈 화면 (대시보드)
├── globals.css             # 전역 스타일
├── income/                 # 매출 관련
│   └── new/
│       └── page.tsx        # 매출 입력 화면 (반복 거래 옵션 포함)
├── expense/                # 매입 관련
│   └── new/
│       └── page.tsx        # 매입 입력 화면 (반복 거래 옵션 포함)
├── transaction/            # 거래 관련
│   └── [id]/
│       └── edit/
│           └── page.tsx    # 거래 수정 화면
├── recurring/              # 반복 거래 관련
│   └── [id]/
│       └── edit/
│           └── page.tsx    # 반복 거래 수정 화면
└── settings/               # 설정
    └── page.tsx            # 설정 화면 (반복 거래 관리 포함)
```

---

## 컴포넌트 구조

```
src/components/
├── ui/                     # shadcn/ui 기본 컴포넌트
├── layout/                 # 레이아웃 컴포넌트
│   ├── app-layout.tsx      # 앱 전체 레이아웃
│   └── bottom-nav.tsx      # 하단 네비게이션
├── transaction/            # 거래 관련 컴포넌트
│   ├── transaction-card.tsx
│   ├── transaction-list.tsx
│   ├── transaction-form.tsx
│   └── amount-input.tsx
├── recurring/              # 반복 거래 컴포넌트
│   ├── recurring-transaction-card.tsx    # 반복 거래 카드
│   ├── recurring-transaction-list.tsx    # 반복 거래 목록
│   ├── recurring-form-section.tsx        # 반복 거래 입력 섹션
│   └── frequency-selector.tsx            # 주기 선택 컴포넌트
├── dashboard/              # 대시보드 컴포넌트
│   ├── profit-display.tsx  # 영업이익 표시
│   ├── summary-card.tsx    # 요약 카드
│   └── period-tabs.tsx     # 기간 탭
└── common/                 # 공통 컴포넌트
    ├── date-picker.tsx
    └── confirm-dialog.tsx
```

---

## 예상 일정

| Phase   | 기간  | 산출물                                             |
| ------- | ----- | -------------------------------------------------- |
| Phase 1 | 1-2일 | 프로젝트 골격, 라우팅, 타입 정의 (반복 거래 포함)  |
| Phase 2 | 4-6일 | 모든 화면 UI 완성 (더미 데이터, 반복 거래 UI 포함) |
| Phase 3 | 6-8일 | DB 연동, 핵심 기능 동작 (반복 거래 로직 포함)      |
| Phase 4 | 2-3일 | 최적화, PWA, 배포                                  |

**총 예상 기간: 2.5-3.5주**

---

## 참고 문서

- **PRD**: `/docs/PRD.md`
- **프로젝트 구조**: `/docs/guides/project-structure.md`
- **스타일링 가이드**: `/docs/guides/styling-guide.md`
- **컴포넌트 패턴**: `/docs/guides/component-patterns.md`
- **폼 처리 가이드**: `/docs/guides/forms-react-hook-form.md`
- **Next.js 15 가이드**: `/docs/guides/nextjs-15.md`
