# 자영업자 매입/매출 관리 앱 MVP PRD

## 🎯 핵심 정보

**목적**: 바쁜 1인 자영업자가 누워서도 5초 만에 매입/매출을 기록하고, 실제 영업이익을 즉시 확인할 수 있는 앱
**사용자**: 혼자 가게를 운영하며 수기 장부 작성이 부담스러운 1인 자영업자

## 🚶 사용자 여정

```
0. 로그인 화면 (최초 접속 시)
   ↓ [Google/Kakao/Naver 소셜 로그인]

1. 홈 화면 (대시보드)
   ↓ [당일 영업 요약 확인]

2. 매출 입력 필요 시
   ↓ [+ 매출 버튼 탭]

3. 매출 입력 화면
   ↓ [금액 입력 (3초) → 저장]

4. 홈 화면 (자동 리디렉션)
   ↓ [실시간 영업이익 업데이트 확인]

5. 매입 입력 필요 시
   ↓ [+ 매입 버튼 탭]

6. 매입 입력 화면
   ↓ [금액 입력 (3초) → 저장]

7. 홈 화면 (자동 리디렉션)
   ↓ [실시간 영업이익 업데이트 확인]

8. 주간/월간 요약 확인
   ↓ [기간별 탭 전환]

9. 홈 화면
   ↓ [필요시 거래 내역 수정/삭제]
```

## ⚡ 기능 명세

### 0. 인증 기능 (필수)

| ID       | 기능명         | 설명                                                    | MVP 필수 이유                       | 관련 페이지 |
| -------- | -------------- | ------------------------------------------------------- | ----------------------------------- | ----------- |
| **F000** | 소셜 로그인    | Google OAuth 소셜 로그인으로 간편 인증 (Supabase Auth)  | 사용자 데이터 클라우드 저장 필수    | 로그인 화면 |
| **F009** | 자동 로그인    | 로그인 상태 유지, 재접속 시 자동 로그인                 | 사용자 편의성 필수                  | 전체        |
| **F014** | 로그아웃       | 로그아웃 및 계정 전환 기능                              | 보안 및 다중 계정 지원              | 설정 화면   |
| **F015** | 사용자 정보    | 로그인한 사용자 프로필 정보 표시 (이름, 이메일, 프사)   | 사용자 확인 및 신뢰성               | 설정 화면   |

### 1. MVP 핵심 기능

| ID       | 기능명               | 설명                                                      | MVP 필수 이유                  | 관련 페이지             |
| -------- | -------------------- | --------------------------------------------------------- | ------------------------------ | ----------------------- |
| **F001** | 빠른 매출 입력       | 금액만 입력하면 자동 저장 (날짜는 오늘 기본값)            | 핵심 가치 제공 - 5초 입력 목표 | 홈 화면, 매출 입력 화면 |
| **F002** | 빠른 매입 입력       | 금액만 입력하면 자동 저장 (날짜는 오늘 기본값)            | 핵심 가치 제공 - 5초 입력 목표 | 홈 화면, 매입 입력 화면 |
| **F003** | 실시간 영업이익 계산 | 매출 - 매입 = 영업이익 자동 계산 및 표시                  | 비즈니스 로직 핵심             | 홈 화면                 |
| **F004** | 당일 거래 요약       | 오늘의 매출/매입/영업이익 한눈에 표시                     | 사용자 기본 니즈               | 홈 화면                 |
| **F005** | 주간/월간 요약       | 기간별 매출/매입/영업이익 집계 표시                       | 사업 성과 파악 필수            | 홈 화면                 |
| **F006** | 거래 내역 목록       | 날짜별 매입/매출 내역 시간순 정렬 표시                    | 기록 확인 필수                 | 홈 화면                 |
| **F007** | 반복 거래 등록       | 주간/월간 고정 매입/매출 등록 (인건비, 월세, 정기구독 등) | 고정비 자동화 필수             | 매출/매입 입력 화면     |
| **F008** | 반복 거래 자동 생성  | 등록된 반복 거래를 주기에 맞춰 자동으로 거래 내역 생성    | 수작업 최소화                  | 백그라운드 처리         |

### 2. MVP 필수 지원 기능

| ID       | 기능명           | 설명                                 | MVP 필수 이유       | 관련 페이지                         |
| -------- | ---------------- | ------------------------------------ | ------------------- | ----------------------------------- |
| **F010** | 거래 수정        | 잘못 입력한 거래 금액/날짜 수정      | 입력 실수 대응 필수 | 거래 수정 화면                      |
| **F011** | 거래 삭제        | 잘못 입력한 거래 삭제                | 입력 실수 대응 필수 | 홈 화면, 거래 수정 화면             |
| **F012** | 메모 추가 (선택) | 거래에 간단한 메모 추가 (선택사항)   | 거래 구분 최소 기능 | 매출/매입 입력 화면, 거래 수정 화면 |
| **F013** | 반복 거래 관리   | 등록된 반복 거래 목록 조회/수정/삭제 | 고정비 관리 필수    | 설정 화면                           |

### 3. MVP 이후 기능 (제외)

- 카테고리별 분류 (식재료, 인건비, 임대료 등)
- 영수증 사진 첨부
- 거래처 관리
- 세금 계산기
- 통계 차트 (꺾은선, 막대 그래프)
- 예산 설정 및 알림
- CSV/Excel 내보내기
- 다중 사업장 관리
- 직원 계정 관리
- 이메일/비밀번호 로그인
- Kakao/Naver 소셜 로그인 (MVP는 Google만 지원)

## 📱 메뉴 구조

```
📱 자영업자 장부 내비게이션

├── 🔐 로그인 (최초 접속)
│   └── 기능: F000 (Google 소셜 로그인)
│
├── 🏠 홈 (대시보드) - 인증 필수
│   └── 기능: F003, F004, F005, F006 (영업이익 계산, 당일/기간 요약, 거래 내역)
│
├── ➕ 빠른 입력 버튼 (하단 고정) - 인증 필수
│   ├── 💰 매출 입력 - F001, F007 (빠른 매출 입력, 반복 거래 등록)
│   └── 🛒 매입 입력 - F002, F007 (빠른 매입 입력, 반복 거래 등록)
│
└── ⚙️ 설정 - 인증 필수
    ├── 👤 사용자 정보 - F015 (프로필 표시)
    ├── 🔁 반복 거래 관리 - F013 (주간/월간 고정비 관리)
    ├── 🚪 로그아웃 - F014
    └── 기능: 버전 정보, 문의하기

🎯 상황별 화면 전환

최초 접속 시
└── 로그인 화면 표시 → 소셜 로그인 → 홈 화면 - F000, F009

로그인 상태 확인
└── 로그인 되어있으면 바로 홈 화면, 아니면 로그인 화면으로 리디렉션 - F009

입력 완료 시
└── 자동으로 홈 화면으로 리디렉션 (실시간 영업이익 업데이트 확인)

거래 수정 필요 시
└── 홈 화면 거래 내역 → 거래 항목 탭 → 거래 수정 화면 - F010, F011, F012

반복 거래 관리 시
└── 설정 화면 → 반복 거래 목록 → 수정/삭제/활성화 토글 - F013

반복 거래 자동 생성
└── 백그라운드 작업: 매일 자정 실행, 주기 도래 시 자동 생성 - F008

로그아웃 시
└── 설정 화면 → 로그아웃 버튼 → 로그인 화면으로 이동 - F014
```

---

## 📄 페이지별 상세 기능

### 로그인 화면

> **구현 기능:** `F000`, `F009` | **인증:** 불필요 (공개 페이지)

| 항목            | 내용                                                                                                                                                                                                      |
| --------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **역할**        | 앱 최초 접속 시 Google OAuth를 통한 간편 인증                                                                                                                                                              |
| **진입 경로**   | 앱 최초 접속 시, 로그아웃 후, 세션 만료 시                                                                                                                                                                |
| **사용자 행동** | "Google로 로그인" 버튼 탭 → Google 계정 선택 → 권한 승인 → 홈 화면 자동 이동                                                                                                                          |
| **주요 기능**   | • **Google 로그인** 버튼 (Google 브랜드 가이드라인 준수)<br>• Supabase Auth 기반 인증 처리<br>• 로그인 성공 시 자동 세션 생성 및 유지<br>• 간단한 앱 소개 문구: "자영업자 장부 - 5초 만에 매입/매출 기록하기" |
| **다음 이동**   | 로그인 성공 → 홈 화면 (대시보드)                                                                                                                                                                         |

---

### 홈 화면 (대시보드)

> **구현 기능:** `F003`, `F004`, `F005`, `F006`, `F011` | **인증:** 필수

| 항목            | 내용                                                                                                                                                                                                                                                             |
| --------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **역할**        | 모든 정보를 한 화면에서 확인하는 메인 대시보드 (영업이익, 당일/기간 요약, 거래 내역)                                                                                                                                                                             |
| **진입 경로**   | 앱 실행 시 첫 화면, 매출/매입 입력 완료 후 자동 리디렉션                                                                                                                                                                                                         |
| **사용자 행동** | 영업이익 확인, 거래 내역 확인, 빠른 입력 버튼 탭                                                                                                                                                                                                                 |
| **주요 기능**   | • **큰 글씨로 영업이익 표시** (매출 - 매입)<br>• 당일 매출/매입/이익 요약 카드<br>• 기간 탭 (오늘/이번주/이번달) 전환<br>• 거래 내역 리스트 (시간순 정렬, 최신순)<br>• 거래 항목 스와이프/탭하여 삭제 (F011)<br>• **하단 고정: + 매출, + 매입 버튼** (빠른 접근) |
| **다음 이동**   | + 매출 → 매출 입력 화면, + 매입 → 매입 입력 화면, 거래 항목 탭 → 거래 수정 화면                                                                                                                                                                                  |

---

### 매출 입력 화면

> **구현 기능:** `F001`, `F007`, `F012` | **인증:** 필수

| 항목            | 내용                                                                                                                                                                                                                                              |
| --------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **역할**        | 매출 금액을 5초 안에 입력하는 초고속 입력 전용 화면                                                                                                                                                                                               |
| **진입 경로**   | 홈 화면 하단 + 매출 버튼 탭                                                                                                                                                                                                                       |
| **사용자 행동** | 금액 숫자 입력 → 선택적으로 메모 입력 → 반복 설정 (선택) → 저장 버튼 탭                                                                                                                                                                           |
| **주요 기능**   | • **금액 입력 필드** (숫자 키패드 자동 포커스)<br>• 날짜 자동 설정 (오늘 날짜 기본값, 수정 가능)<br>• 메모 입력 (선택사항, 최대 100자)<br>• **반복 거래 설정** (선택): 주간/월간 반복 옵션, 시작일/종료일<br>• **저장** 버튼 (Server Action 활용) |
| **다음 이동**   | 저장 성공 → 홈 화면 (자동 리디렉션), 취소 → 홈 화면                                                                                                                                                                                               |

---

### 매입 입력 화면

> **구현 기능:** `F002`, `F007`, `F012` | **인증:** 필수

| 항목            | 내용                                                                                                                                                                                                                                                                                   |
| --------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **역할**        | 매입 금액을 5초 안에 입력하는 초고속 입력 전용 화면                                                                                                                                                                                                                                    |
| **진입 경로**   | 홈 화면 하단 + 매입 버튼 탭                                                                                                                                                                                                                                                            |
| **사용자 행동** | 금액 숫자 입력 → 선택적으로 메모 입력 → 반복 설정 (선택) → 저장 버튼 탭                                                                                                                                                                                                                |
| **주요 기능**   | • **금액 입력 필드** (숫자 키패드 자동 포커스)<br>• 날짜 자동 설정 (오늘 날짜 기본값, 수정 가능)<br>• 메모 입력 (선택사항, 최대 100자, 예: "월세", "인건비", "고정 재료비")<br>• **반복 거래 설정** (선택): 주간/월간 반복 옵션, 시작일/종료일<br>• **저장** 버튼 (Server Action 활용) |
| **다음 이동**   | 저장 성공 → 홈 화면 (자동 리디렉션), 취소 → 홈 화면                                                                                                                                                                                                                                    |

---

### 거래 수정 화면

> **구현 기능:** `F010`, `F011`, `F012` | **인증:** 필수

| 항목            | 내용                                                                                                                                                          |
| --------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **역할**        | 잘못 입력한 거래를 수정하거나 삭제하는 화면                                                                                                                   |
| **진입 경로**   | 홈 화면 거래 내역에서 거래 항목 탭                                                                                                                            |
| **사용자 행동** | 금액/날짜/메모 수정 → 저장, 또는 삭제 버튼 탭                                                                                                                 |
| **주요 기능**   | • 거래 금액 수정 필드<br>• 거래 날짜 수정 (날짜 선택기)<br>• 메모 수정 필드<br>• **수정 저장** 버튼 (Server Action)<br>• **삭제** 버튼 (확인 다이얼로그 표시) |
| **다음 이동**   | 저장/삭제 성공 → 홈 화면, 취소 → 홈 화면                                                                                                                      |

---

### 설정 화면

> **구현 기능:** `F013`, `F014`, `F015` | **인증:** 필수

| 항목            | 내용                                                                                                                                                                                                                                                                                                                                        |
| --------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **역할**        | 사용자 정보, 반복 거래 관리 및 앱 설정 화면                                                                                                                                                                                                                                                                                                 |
| **진입 경로**   | 홈 화면 상단 설정 아이콘 탭 (선택)                                                                                                                                                                                                                                                                                                          |
| **사용자 행동** | 사용자 정보 확인, 반복 거래 목록 확인, 수정/삭제, 활성화/비활성화, 로그아웃                                                                                                                                                                                                                                                                 |
| **주요 기능**   | • **사용자 정보 섹션** (F015): 프로필 사진, 이름, 이메일 표시<br>• **반복 거래 목록** (F013): 등록된 주간/월간 고정비 표시<br>• 각 항목 표시: 금액, 메모, 반복 주기, 다음 생성일<br>• **수정/삭제** 버튼 (각 항목)<br>• **활성화/비활성화** 토글 (임시 중지 기능)<br>• **로그아웃** 버튼 (F014)<br>• 앱 버전 정보, 문의하기 링크 |
| **다음 이동**   | 수정 → 반복 거래 수정 화면, 삭제 성공 → 설정 화면 유지, 로그아웃 → 로그인 화면                                                                                                                                                                                                                                                              |

---

## 🗄️ 데이터 모델

### Transaction (거래)

| 필드       | 설명        | 타입/관계                  |
| ---------- | ----------- | -------------------------- |
| id         | 고유 식별자 | UUID                       |
| type       | 거래 유형   | ENUM ('income', 'expense') |
| amount     | 거래 금액   | DECIMAL(10, 2)             |
| date       | 거래 날짜   | DATE                       |
| memo       | 메모        | VARCHAR(50), nullable      |
| created_at | 생성 시간   | TIMESTAMP                  |
| updated_at | 수정 시간   | TIMESTAMP                  |

### DailySummary (일별 요약 - 성능 최적화용)

| 필드          | 설명            | 타입/관계      |
| ------------- | --------------- | -------------- |
| id            | 고유 식별자     | UUID           |
| date          | 요약 날짜       | DATE (UNIQUE)  |
| total_income  | 당일 총 매출    | DECIMAL(10, 2) |
| total_expense | 당일 총 매입    | DECIMAL(10, 2) |
| net_profit    | 당일 영업이익   | DECIMAL(10, 2) |
| updated_at    | 마지막 업데이트 | TIMESTAMP      |

### RecurringTransaction (반복 거래)

| 필드              | 설명             | 타입/관계                      |
| ----------------- | ---------------- | ------------------------------ |
| id                | 고유 식별자      | UUID                           |
| type              | 거래 유형        | ENUM ('income', 'expense')     |
| amount            | 거래 금액        | DECIMAL(10, 2)                 |
| memo              | 메모             | VARCHAR(100), nullable         |
| frequency         | 반복 주기        | ENUM ('weekly', 'monthly')     |
| start_date        | 시작 날짜        | DATE                           |
| end_date          | 종료 날짜        | DATE, nullable (없으면 무기한) |
| last_generated_at | 마지막 생성 날짜 | DATE, nullable                 |
| is_active         | 활성 상태        | BOOLEAN (default: true)        |
| created_at        | 생성 시간        | TIMESTAMP                      |
| updated_at        | 수정 시간        | TIMESTAMP                      |

## 🛠️ 기술 스택 (최신 버전)

### 🎨 프론트엔드 프레임워크

- **Next.js 15** (App Router + Turbopack) - React 풀스택 프레임워크
- **TypeScript 5** - 타입 안전성 보장
- **React 19.1.0** - UI 라이브러리 (최신 동시성 기능)

### 🎨 스타일링 & UI

- **TailwindCSS v4** (설정파일 없는 새로운 엔진) - 유틸리티 CSS 프레임워크
- **shadcn/ui** (new-york style) - 고품질 React 컴포넌트 라이브러리
- **Lucide React** - 아이콘 라이브러리
- **모바일 퍼스트 반응형 디자인** - 주 사용 환경이 모바일

### 📝 폼 & 검증

- **React Hook Form 7.x** - 폼 상태 관리
- **Zod** - 스키마 검증 라이브러리
- **Server Actions** - Next.js 15 네이티브 폼 처리

### 🗄️ 백엔드 & 데이터베이스

- **Supabase Auth** - Google OAuth 소셜 로그인 및 세션 관리
- **Supabase PostgreSQL** - 클라우드 데이터베이스 (사용자별 데이터 분리, RLS 지원)
- **@supabase/supabase-js** - Supabase 클라이언트 라이브러리
- **@supabase/ssr** - Next.js App Router SSR 지원

### 🚀 배포 & 호스팅

- **Vercel** - Next.js 15 최적화 배포 플랫폼 (PWA 지원)
- **PWA 지원** - 오프라인 사용 및 홈 화면 추가 가능

### 📦 패키지 관리

- **npm** - 의존성 관리

---

## ✅ 정합성 검증 완료

### 🔍 1단계: 기능 명세 → 페이지 연결 검증

- ✅ F001 (빠른 매출 입력) → 홈 화면, 매출 입력 화면
- ✅ F002 (빠른 매입 입력) → 홈 화면, 매입 입력 화면
- ✅ F003 (실시간 영업이익 계산) → 홈 화면
- ✅ F004 (당일 거래 요약) → 홈 화면
- ✅ F005 (주간/월간 요약) → 홈 화면
- ✅ F006 (거래 내역 목록) → 홈 화면
- ✅ F007 (반복 거래 등록) → 매출/매입 입력 화면
- ✅ F008 (반복 거래 자동 생성) → 백그라운드 처리
- ✅ F010 (거래 수정) → 거래 수정 화면
- ✅ F011 (거래 삭제) → 홈 화면, 거래 수정 화면
- ✅ F012 (메모 추가) → 매출/매입 입력 화면, 거래 수정 화면
- ✅ F013 (반복 거래 관리) → 설정 화면

### 🔍 2단계: 메뉴 구조 → 페이지 연결 검증

- ✅ 홈 (대시보드) → 홈 화면 존재 (F003, F004, F005, F006)
- ✅ 매출 입력 → 매출 입력 화면 존재 (F001, F007)
- ✅ 매입 입력 → 매입 입력 화면 존재 (F002, F007)
- ✅ 거래 수정 → 거래 수정 화면 존재 (F010, F011, F012)
- ✅ 설정 → 설정 화면 존재 (F013)

### 🔍 3단계: 페이지별 상세 기능 → 역참조 검증

- ✅ 홈 화면 (F003, F004, F005, F006, F011) - 모두 기능 명세에 정의됨
- ✅ 매출 입력 화면 (F001, F007, F012) - 모두 기능 명세에 정의됨
- ✅ 매입 입력 화면 (F002, F007, F012) - 모두 기능 명세에 정의됨
- ✅ 거래 수정 화면 (F010, F011, F012) - 모두 기능 명세에 정의됨
- ✅ 설정 화면 (F013) - 모두 기능 명세에 정의됨
- ✅ 백그라운드 처리 (F008) - 기능 명세에 정의됨

### 🔍 4단계: 누락 및 고아 항목 검증

- ✅ 기능 명세의 모든 기능이 페이지에서 구현됨
- ✅ 페이지의 모든 기능이 기능 명세에 정의됨
- ✅ 메뉴의 모든 항목이 페이지로 연결됨
- ✅ 고아 항목 없음

---

## 🎯 MVP 성공 지표

- **입력 속도**: 매출/매입 입력 완료까지 평균 5초 이내
- **사용 빈도**: 하루 평균 3회 이상 앱 접속
- **데이터 정확도**: 사용자가 자신의 실제 영업이익을 정확히 인지
- **사용자 피로도**: "피곤해도 쓸 수 있다" 사용자 피드백

---

## 🚀 개발 우선순위 (구현 순서)

1. **Phase 1**: 데이터 모델 설계 및 로컬 DB 구축
2. **Phase 2**: 홈 화면 UI (영업이익 표시, 거래 내역)
3. **Phase 3**: 매출/매입 빠른 입력 화면
4. **Phase 4**: 거래 수정/삭제 기능
5. **Phase 5**: 기간별 요약 (주간/월간) 탭
6. **Phase 6**: 모바일 최적화 및 PWA 설정
